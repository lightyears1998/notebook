# PythonåŸºç¡€

## å‘½åè§„èŒƒ

<http://google.github.io/styleguide/pyguide.html#3164-guidelines-derived-from-guidos-recommendations>

## æ³¨é‡Š

```python
# ä¸€è¡Œä¸­â€œ#â€ä¹‹åçš„å†…å®¹ä¸ºæ³¨é‡Šã€‚

"""
Docstringå¯ç”¨ä½œæ¨¡å—æˆ–å‡½æ•°çš„æ³¨é‡Šã€‚
"""

def shout(word):
  """
  Print a word with an
  exclamation mark following it.
  """
  print(word + "!")

shout("spam")
```

## æ•°æ®ç±»å‹

å…­ç±»åŸºæœ¬æ•°æ®ç±»å‹ï¼š

| ç±»å‹ | å¤‡æ³¨ |
| --- | --- |
| æ•°å€¼ç±»å‹ `int`, `float`, `bool`, `complex` | |
| å­—ç¬¦ä¸² `String` | ç”±æˆå¯¹å‡ºç°çš„å•å¼•å·æˆ–åŒå¼•å·åˆ›å»ºã€‚ |
| å…ƒç»„`Tuple` | ç”±å°æ‹¬å·`()`åˆ›å»ºã€‚ |
| åˆ—è¡¨`List` | ç”±ä¸­æ‹¬å·`[]`åˆ›å»ºã€‚ |
| å­—å…¸`Dictionary` | ç”±èŠ±æ‹¬å·`{key: value}`åˆ›å»ºï¼Œå•ç‹¬çš„èŠ±æ‹¬å·ä¸ºç©ºå­—å…¸ã€‚ |
| é›†åˆ`Set` | ä½¿ç”¨èŠ±æ‹¬å·`{value}`æˆ–è€…`set()`åˆ›å»ºï¼Œå¿…é¡»ç”¨`set()`åˆ›å»ºç©ºé›†åˆï¼Œå› ä¸ºèŠ±æ‹¬å·é»˜è®¤ç”¨äºåˆ›å»º`Dictionary`ã€‚ |

å…¶ä¸­ï¼š

- ä¸å¯å˜ç±»å‹ *Immutable*ï¼š `Number`, `String`, `Tuple`
- å¯å˜ç±»å‹ *Mutable*ï¼š`List`, `Dictionary`, `Set`

ä½¿ç”¨å·¥å…·æ–¹æ³•`type(variable)`æŸ¥çœ‹variableçš„ç±»å‹ã€‚

### None æ— ç±»å‹

æœªå®šä¹‰è¿”å›ç±»å‹çš„å‡½æ•°è¿”å›`None`ã€‚

`None`å¯è¢«è½¬æ¢æˆå¸ƒå°”ç±»å‹å€¼çš„`False`ã€‚

```python
if None:
  # won't execute
```

### Number æ•°å€¼ç±»å‹

åŒ…æ‹¬`int`, `float`, `bool`å’Œ`complex`å››ç±»æ•°å€¼ç±»å‹ã€‚

#### å…¶ä»–ç±»å‹è½¬æ¢åˆ°æ•°å€¼ç±»å‹

- `True`, `False`åœ¨å‚ä¸æ•°å­—è¿ç®—æ—¶åˆ†åˆ«è½¬åŒ–ä¸º1å’Œ0ã€‚
- `int()` è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ã€‚
- `float()` è½¬æ¢ä¸ºæµ®ç‚¹æ•°ç±»å‹ã€‚

#### å››åˆ™è¿ç®—

- æµ®ç‚¹é™¤æ³• `/` æ•´é™¤ `//`
- å–æ¨¡ã€æµ®ç‚¹å–æ¨¡ `%`
- ä¹˜æ–¹ `**`

```python
>>> bin(7)
'0b111'
```

#### æ•°å€¼ç±»å‹çš„å·¥å…·å‡½æ•°

è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼š

- `str()`
- `bin()` å°†æ•´æ•°è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚

æ•°å€¼è®¡ç®—ï¼š

- `min()`, `max()`
- `abs()`
- `sum(åˆ—è¡¨)` å¯¹listå¯¹è±¡å…ƒç´ æ±‚å’Œã€‚

### String å­—ç¬¦ä¸²

ç”¨æˆå¯¹`''`æˆ–`""`æ¥å£°æ˜ï¼Œå•å¼•å·ä¸åŒå¼•å·æ— åŒºåˆ«ã€‚å­—ç¬¦ä¸²å†…éƒ¨ä»¥Unicodeè¡¨ç¤ºã€‚

å‚ä¸æ•°å€¼è¿ç®—ï¼š

- ä¸èƒ½ä¸æ•°å­—ç›´æ¥ç›¸åŠ ã€‚
- ä¸æ•´æ•°çš„ä¹˜æ³•ï¼Œå¦‚`str * 3`ä¼šå¤åˆ¶å­—ç¬¦ä¸²ã€‚
- strä¹‹é—´ç›¸åŠ åˆå¹¶å­—ç¬¦ä¸²ï¼Œä¸èƒ½ç›¸å‡ã€‚

#### bytes

```py
'ABC'   # string
b'ABC'  # bytes

>>> bytes('æˆ‘æ­Œå”±æ¯ä¸€æ¡æ²³', 'gbk')
b'\xce\xd2\xb8\xe8\xb3\xaa\xc3\xbf\xd2\xbb\xcc\xf5\xba\xd3'
```

æ„é€ å‡½æ•°ï¼š

- å­—é¢å€¼ `b'ABC'`
- `bytes('å­—ç¬¦ä¸²', 'ç¼–ç åç§°')`

å·¥å…·å‡½æ•°ï¼š

- `str.encode([encoding='gbk'])` å°†strç¼–ç ä¸ºbytesã€‚
- `bytes.decode([encoding='ascii'])` å°†bytesè§£ç ä¸ºstrã€‚

#### `format()` æ ¼å¼åŒ–å­—ç¬¦ä¸²

```py
nums = [4, 5, 6]
msg = "Numbers: {0}, {1}, {2}".format(nums[0], nums[1], nums[2])

msg = "({x}, {y})".format(x=5, y=2)
```

#### å­—ç¬¦ä¸²ç±»å‹çš„å·¥å…·å‡½æ•°

ä¸‹åˆ—å·¥å…·å‡½æ•°éƒ½æ˜¯å¼‚åœ°çš„ã€‚

- `åˆ†éš”ç¬¦.join([å­—ç¬¦ä¸²åˆ—è¡¨])` å½¢å¦‚PHPä¸­çš„`implode()`ï¼Œåˆ©ç”¨åˆ†å‰²ç¬¦åˆå¹¶å­—ç¬¦ä¸²ã€‚
- `str.startswith()`, `str.endswith()` è¿”å›çœŸä¸å‡ã€‚
- `str.replace('what', 'with')` å°†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰`what`æ›¿æ¢ä¸º`with`ã€‚
- `str.upper()`, `str.lower()` å­—ç¬¦ä¸²å…¨æ–‡å¤§å°å†™è½¬æ¢ã€‚
- `str.split('separator')` åˆ†å‰²å­—ç¬¦ä¸²ä¸ºåˆ—è¡¨ã€‚

### Tuple å…ƒç»„

- å…ƒç»„ä¸listè¡Œä¸ºç±»ä¼¼ï¼Œä½†å®ƒæ˜¯immutableå¯¹è±¡ã€‚ä½¿ç”¨å°æ‹¬å·è€Œä¸æ˜¯æ–¹æ‹¬å·ã€‚
- ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨å°æ‹¬å·ï¼Œç›´æ¥ä½¿ç”¨é€—å·åˆ†éš”å…ƒç´ å³å¯ã€‚

```py
# list
list = ["one", "two"]

# dictionary
dictionary = {1:"one", 2:"two"}

# tuple
tuple = ("one", "two")
tuple = "one", "two"
```

### å…ƒç»„è§£æ„ Tuple unpacking

```py
numbers = (1, 2, 3)
a, b, c = numbers

# a = 1, b = 2, c = 3
```

ä½¿ç”¨`*`è¡¨è¾¾å¼æ¥è·å–è§£æ„å…ƒç»„ä¸­æœªåˆ†é…çš„éƒ¨åˆ†ï¼š

```py
numbers = [1, 2, 3, 4, 5]
a, *b, c = numbers

# a = 1, b = [2, 3, 4], c = 5
```

### List åˆ—è¡¨

Listä½¿ç”¨æ–¹æ‹¬å·`[]`å®šä¹‰ï¼Œä¸‹æ ‡ä»0å¼€å§‹ã€‚

```py
['1', '2', '3', ]  # Listä¸­åªæœ‰3ä¸ªå…ƒç´ 
```

å‚ä¸å››åˆ™è¿ç®—ï¼š

- listä¹‹é—´å¯ä»¥ç›¸åŠ ï¼Œä½†ä¸èƒ½ç›¸å‡ã€‚
- listä¸æ•°å€¼é—´çš„ä¹˜æ³•ï¼š`[1, 2, 3]*2`è¿”å›`[1, 2, 3, 1, 2, 3]`ã€‚åˆ—è¡¨ä¸å°äºç­‰äº0çš„æ•°ç›¸ä¹˜è¿”å›ç©ºåˆ—è¡¨ã€‚

#### åˆ—è¡¨ç±»å‹çš„å·¥å…·å‡½æ•°

- `in` æ“ä½œç¬¦åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨Listå†…ã€‚
- `len(list)` è¿”å›Listçš„é•¿åº¦ã€‚

#### æ–¹æ³•

- `append()`
- `insert()` åŸä½ç½®å…ƒç´ åç§»
- `index()` è¿”å›å€¼çš„ç¬¬ä¸€ä¸ªç´¢å¼•ä½ç½®ï¼Œä¸å­˜åœ¨æ—¶æŠ›å‡º`ValueError`

#### Slicing åˆ‡ç‰‡

æ³¨æ„åˆ°ï¼ŒTupleåŠå­—ç¬¦ä¸²ä¹Ÿæœ‰ç±»ä¼¼æ–¹æ³•

- `[bgn:end:step]` ä»¥æ­¥é•¿stepåŒ…å«å…ƒç´ `[bgn, end)`ï¼Œä¸‰ä¸ªå‚æ•°éƒ½ä¸æ˜¯å¿…è¦çš„
- æ³¨æ„bgnå¯ä»¥å¤§äºendï¼ˆæ‰€ä»¥ä¸Šé¢é‚£ä¸ªåŒºé—´çš„å†™æ³•æ˜¯é”™çš„ğŸ˜…ï¼‰ï¼Œç”Ÿæˆçš„æ–¹å‘æ€»æ˜¯ä»bgnåˆ°endï¼Œä¸”ä¸åŒ…å«end
- å¦‚æœç´¢å¼•indexä¸ºè´Ÿæ•°ï¼Œå®ƒæ˜¯æŒ‡ä»åå¾€å‰æ•°ç¬¬indexä¸ªå­—ç¬¦ï¼›`[2:-2]`ç”Ÿæˆ`[2, å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦)`
- `[::-1]` åè½¬æ•°ç»„ï¼Œå¦‚æœæ­¥é•¿ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆListä¼šåå‘ç”Ÿæˆ

#### Comprehensions åˆ—è¡¨è§£æå™¨

ä»æ•°å­¦çš„é›†åˆè¯­æ³•ï¼ˆset-builder notationï¼‰ä¸­è„±èƒçš„åˆ—è¡¨è§£æå™¨

```py
cubes = [i**3 for i in range(5)]                     # [0, 1, 8, 27, 64]
evens = [i**2 for i in range(10) if i**2 % 2 == 0 ]  # [0, 4, 16, 36, 64]
```

æ»¥ç”¨åˆ—è¡¨è§£æå™¨å¯èƒ½äº§ç”ŸMemoryErrorï¼Œå¯ä½¿ç”¨generatorç¼“è§£ã€‚

#### å…¶ä»–è°“è¯

- `all()`, `any()`

  ```py
  nums = [55, 44, 33, 22, 11]

  if all([i > 5 for i in nums]):
  print("All larger than 5")

  if any([i % 2 == 0 for i in nums]):
  print("At least one is even")
  ```

- `enumerate()` æŒ‰é”®å€¼å¯¹çš„æ–¹å¼éå†åˆ—è¡¨ï¼Œè¿”å›å…ƒç»„

  ```py
  for v in enumerate(nums):
   print(v)
  ```

### Set é›†åˆ

- ä½¿ç”¨`set()`æ¥å—ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå‚æ•°æ„å»ºé›†åˆ
- `add()` æ·»åŠ å…ƒç´ 
- åˆå¹¶`|`, åŒæ—¶å­˜åœ¨`&`, ä¸åŒæ—¶å­˜åœ¨`^`, å·®ï¼ˆç¬¬ä¸€ä¸ªé›†åˆä¸­åŒ…å«è€Œç¬¬äºŒä¸ªé›†åˆä¸­ä¸åŒ…å«ï¼‰`-`

### Dictionary å­—å…¸

```py
ages = {"Dave": 24, "Mary":42, "John":58}

print("Mary" in ages)      # True
print("Will" not in ages)  # True

ages.get("Dave")
ages.get("Hurry")          # è¿”å›None
ages.get("Hurry", 34)      # è¿”å›34
```

åªæœ‰ä¸å˜çš„ï¼ˆimmutableï¼‰å¯¹è±¡æ‰èƒ½ä½œä¸ºDictionaryçš„é”®ï¼Œå¦åˆ™æŠ›å‡ºKeyErrorã€‚

```py
d: dict = {}

# æ·»åŠ é”®å€¼
d[k1] = v1
d.update({k2: v2})

# d == { k1: v1, k2: v2 }
```
